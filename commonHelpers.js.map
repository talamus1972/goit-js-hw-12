{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport axios from 'axios';\n\nconst form = document.querySelector('.form');\nconst imagesGallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nconst BASE_URL = 'https://pixabay.com/api/?';\nconst API_KEY = '41564235-b9b3b0b401bd21d391a887255';\n\nconst searchParamsDefault = {\n  key: API_KEY,\n  q: '',\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n  per_page: 20,\n};\n\nlet currentPage = 1;\nlet searchQuery = '';\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n  close: true,\n  enableKeyboard: true,\n  docClose: true,\n});\n\nconst showLoader = state => {\n  loader.style.display = state ? 'block' : 'none';\n};\n\nconst showLoadMoreBtn = state => {\n  loadMoreBtn.style.display = state ? 'block' : 'none';\n};\n\nconst appendImagesToGallery = hits => {\n  const newImages = hits.map(\n    image =>\n      `\n      <li class=\"gallery-item\">\n        <a href=${image.largeImageURL}> \n          <img class=\"gallery-img\" src=${image.webformatURL} alt=${image.tags}/>\n        </a>\n        <div class=\"gallery-text-box\">\n          <p>Likes: <span class=\"text-value\">${image.likes}</span></p>\n          <p>Views: <span class=\"text-value\">${image.views}</span></p>\n          <p>Comments: <span class=\"text-value\">${image.comments}</span></p>\n          <p>Downloads: <span class=\"text-value\">${image.downloads}</span></p>\n        </div>\n      </li>\n    `\n  );\n  imagesGallery.innerHTML += newImages.join('');\n  lightbox.refresh();\n};\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n  showLoader(true);\n\n  searchQuery = encodeURIComponent(event.target.elements.search.value.trim());\n\n  if (searchQuery === '') {\n    console.error('Please enter a valid search query.');\n    return;\n  }\n\n  currentPage = 1;\n\n  await getImages(searchQuery, currentPage);\n  event.currentTarget.reset();\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n  showLoadMoreBtn(false);\n  currentPage++;\n  await getImages(searchQuery, currentPage);\n});\n\nconst getGalleryCardHeight = () => {\n  const firstGalleryCard = document.querySelector('.gallery-item');\n  if (firstGalleryCard) {\n    const cardHeight = firstGalleryCard.getBoundingClientRect().height;\n    return cardHeight;\n  }\n  return 0;\n};\n\nconst scrollPageByGalleryCardHeight = () => {\n  const cardHeight = getGalleryCardHeight();\n  if (cardHeight > 0) {\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n  }\n};\n\nconst getImages = async (query, page) => {\n  try {\n    const response = await axios.get(\n      `${BASE_URL}q=${query}&page=${page}&per_page=${searchParamsDefault.per_page}&key=${API_KEY}`\n    );\n    const { hits, totalHits } = response.data;\n\n    if (hits.length === 0 && page === 1) {\n      iziToast.error({\n        position: 'topRight',\n        messageColor: '#FFFFFF',\n        backgroundColor: '#EF4040',\n        titleSize: '8px',\n        closeOnEscape: true,\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n      imagesGallery.innerHTML = '';\n    } else if (hits.length === 0 && page > 1) {\n      showEndOfResultsMessage();\n    } else {\n      if (page === 1) {\n        imagesGallery.innerHTML = '';\n      }\n      appendImagesToGallery(hits);\n\n      if (totalHits && imagesGallery.childElementCount >= totalHits) {\n        showLoadMoreBtn(false);\n        showEndOfResultsMessage();\n      } else {\n        showLoadMoreBtn(true);\n        scrollPageByGalleryCardHeight();\n      }\n    }\n  } catch (error) {\n    console.error(error.message);\n  } finally {\n    showLoader(false);\n  }\n};\n"],"names":["form","imagesGallery","loader","loadMoreBtn","BASE_URL","API_KEY","searchParamsDefault","currentPage","searchQuery","lightbox","SimpleLightbox","showLoader","state","showLoadMoreBtn","appendImagesToGallery","hits","newImages","image","event","getImages","getGalleryCardHeight","firstGalleryCard","scrollPageByGalleryCardHeight","cardHeight","query","page","response","axios","totalHits","iziToast","error"],"mappings":"owBAMA,MAAMA,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAgB,SAAS,cAAc,UAAU,EACjDC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,YAAY,EAEjDC,EAAW,4BACXC,EAAU,qCAEVC,EAAsB,CAC1B,IAAKD,EACL,EAAG,GACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,EACZ,EAEA,IAAIE,EAAc,EACdC,EAAc,GAElB,MAAMC,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,MACd,aAAc,IACd,MAAO,GACP,eAAgB,GAChB,SAAU,EACZ,CAAC,EAEKC,EAAaC,GAAS,CAC1BV,EAAO,MAAM,QAAUU,EAAQ,QAAU,MAC3C,EAEMC,EAAkBD,GAAS,CAC/BT,EAAY,MAAM,QAAUS,EAAQ,QAAU,MAChD,EAEME,EAAwBC,GAAQ,CACpC,MAAMC,EAAYD,EAAK,IACrBE,GACE;AAAA;AAAA,kBAEYA,EAAM;AAAA,yCACiBA,EAAM,oBAAoBA,EAAM;AAAA;AAAA;AAAA,+CAG1BA,EAAM;AAAA,+CACNA,EAAM;AAAA,kDACHA,EAAM;AAAA,mDACLA,EAAM;AAAA;AAAA;AAAA,KAIzD,EACEhB,EAAc,WAAae,EAAU,KAAK,EAAE,EAC5CP,EAAS,QAAO,CAClB,EAEAT,EAAK,iBAAiB,SAAU,MAAMkB,GAAS,CAM7C,GALAA,EAAM,eAAc,EACpBP,EAAW,EAAI,EAEfH,EAAc,mBAAmBU,EAAM,OAAO,SAAS,OAAO,MAAM,KAAI,CAAE,EAEtEV,IAAgB,GAAI,CACtB,QAAQ,MAAM,oCAAoC,EAClD,MACD,CAEDD,EAAc,EAEd,MAAMY,EAAUX,EAAaD,CAAW,EACxCW,EAAM,cAAc,OACtB,CAAC,EAEDf,EAAY,iBAAiB,QAAS,SAAY,CAChDU,EAAgB,EAAK,EACrBN,IACA,MAAMY,EAAUX,EAAaD,CAAW,CAC1C,CAAC,EAED,MAAMa,EAAuB,IAAM,CACjC,MAAMC,EAAmB,SAAS,cAAc,eAAe,EAC/D,OAAIA,EACiBA,EAAiB,sBAAqB,EAAG,OAGvD,CACT,EAEMC,EAAgC,IAAM,CAC1C,MAAMC,EAAaH,IACfG,EAAa,GACf,OAAO,SAAS,CACd,IAAKA,EAAa,EAClB,SAAU,QAChB,CAAK,CAEL,EAEMJ,EAAY,MAAOK,EAAOC,IAAS,CACvC,GAAI,CACF,MAAMC,EAAW,MAAMC,EAAM,IAC3B,GAAGvB,MAAaoB,UAAcC,cAAiBnB,EAAoB,gBAAgBD,GACzF,EACU,CAAE,KAAAU,EAAM,UAAAa,GAAcF,EAAS,KAEjCX,EAAK,SAAW,GAAKU,IAAS,GAChCI,EAAS,MAAM,CACb,SAAU,WACV,aAAc,UACd,gBAAiB,UACjB,UAAW,MACX,cAAe,GACf,QACE,0EACV,CAAO,EACD5B,EAAc,UAAY,IACjBc,EAAK,SAAW,GAAKU,EAAO,EACrC,2BAEIA,IAAS,IACXxB,EAAc,UAAY,IAE5Ba,EAAsBC,CAAI,EAEtBa,GAAa3B,EAAc,mBAAqB2B,GAClDf,EAAgB,EAAK,EACrB,4BAEAA,EAAgB,EAAI,EACpBS,KAGL,OAAQQ,EAAP,CACA,QAAQ,MAAMA,EAAM,OAAO,CAC/B,QAAY,CACRnB,EAAW,EAAK,CACjB,CACH"}